<p-toast></p-toast>
<div class="px-4 py-4 grid grid-cols-1 gap-4">
  <div class="lg:hidden">
    <app-breadcrumb></app-breadcrumb>
  </div>

  <section class="rounded-lg bg-background px-8 py-8">
    <ng-container *ngIf="!loading; else loadingTemplate">
      <div class="flex flex-col gap-2">
        <div class="inline-block">
          <h3 class="font-semibold text-foreground font-montserrat">Nuevo Poste</h3>
          <div class="space-x-1 text-xs font-medium text-muted-foreground font-montserrat">
            <span>{{ project.name }}</span>
          </div>
        </div>
        <p class="text-foreground text-justify font-montserrat">
          Le animamos a agregar nuevos postes a sus concesiones existentes. Cada adición representa una oportunidad para
          fortalecer su red de infraestructura y expandir su alcance.
        </p>
        <section class="rounded-lg h-full w-full grid bg-background pt-4">
          <div
            class="rounded-lg bg-background text-xs grid grid-cols-1 gap-4 lg:m-4 lg:gap-4 items-center justify-center md:mx-4">
            <div class="flex flex-col items-center w-full">
              <div class="flex items-center w-full">
                <h3 class="font-bold">Información Basica</h3>
                <div class="flex-grow"></div>
                <button
                  pButton
                  label="Guardar"
                  icon="pi pi-check"
                  class="flex-none rounded-md bg-primary px-4 py-2 text-xs font-semibold text-primary-foreground"
                  (click)="handleSubmit()"></button>
              </div>
              <div class="border-t border-muted-foreground mt-2 w-full">
                <form [formGroup]="form">
                  <div class="grid grid-cols-1 lg:grid-cols-4 md:grid-cols-2 gap-1 lg:gap-3 mx-auto w-full">
                    <div class="flex flex-col">
                      <div class="relative mt-4 h-1/2 flex items-center">
                        <span class="absolute left-3 top-1/2 -translate-y-1/2 pointer-events-none"
                          ><svg-icon
                            src="assets/icons/heroicons/outline/address-book.svg"
                            [svgClass]="'h-6 w-6 mr-2'"></svg-icon
                        ></span>
                        <input
                          type="text"
                          id="name"
                          [ngClass]="{ 'is__invalid-input': submitted && f['name'].errors }"
                          class="peer block pl-10 pr-6 py-2 rounded-lg border border-gray-300"
                          placeholder="Nombre"
                          formControlName="name" />
                      </div>
                      <div *ngIf="submitted && f['name'].errors" class="is__invalid-error">
                        <div *ngIf="f['name'].errors['required']">Nombre Requerido</div>
                        <div *ngIf="f['name'].errors['duplicated']">Nombre Duplicado</div>
                      </div>
                    </div>
                    <div class="flex flex-col">
                      <div class="relative mt-4 h-1/2 flex items-center">
                        <span class="absolute left-3 top-1/2 -translate-y-1/2 pointer-events-none"
                          ><svg-icon
                            src="assets/icons/heroicons/outline/barcode.svg"
                            [svgClass]="'h-6 w-6 mr-2'"></svg-icon
                        ></span>
                        <input
                          type="text"
                          id="serial"
                          [ngClass]="{ 'is__invalid-input': submitted && f['serial'].errors }"
                          class="peer block pl-10 pr-6 py-2 rounded-lg border border-gray-300"
                          placeholder="Serial"
                          formControlName="serial" />
                      </div>
                      <div *ngIf="submitted && f['serial'].errors" class="is__invalid-error">
                        <div *ngIf="f['serial'].errors['required']">Serial Requerido</div>
                        <div *ngIf="f['serial'].errors['duplicated']">Serial Duplicado</div>
                      </div>
                    </div>
                    <div class="flex flex-col">
                      <div class="relative mt-4 h-1/2 flex items-center">
                        <span class="absolute left-3 top-1/2 -translate-y-1/2 pointer-events-none"
                          ><svg-icon
                            src="assets/icons/heroicons/outline/warehouse.svg"
                            [svgClass]="'h-6 w-6 mr-2'"></svg-icon
                        ></span>
                        <input
                          type="text"
                          id="fabricante"
                          [ngClass]="{ 'is__invalid-input': submitted && f['fabricante'].errors }"
                          class="peer block pl-10 pr-6 py-2 rounded-lg border border-gray-300"
                          placeholder="Fabricante"
                          formControlName="fabricante" />
                      </div>
                      <div *ngIf="submitted && f['fabricante'].errors" class="is__invalid-error">
                        <div *ngIf="f['fabricante'].errors['required']">Fabricante Requerido</div>
                      </div>
                    </div>
                    <div class="flex flex-col">
                      <div class="relative mt-4 h-1/2 flex items-center">
                        <span class="absolute left-3 top-1/2 -translate-y-1/2 pointer-events-none"
                          ><svg-icon
                            src="assets/icons/heroicons/outline/information-circle.svg"
                            [svgClass]="'h-6 w-6 mr-2'"></svg-icon
                        ></span>
                        <input
                          type="text"
                          id="modelo"
                          [ngClass]="{ 'is__invalid-input': submitted && f['modelo'].errors }"
                          class="peer block pl-10 pr-6 py-2 rounded-lg border border-gray-300"
                          placeholder="Modelo"
                          formControlName="modelo" />
                      </div>
                      <div *ngIf="submitted && f['modelo'].errors" class="is__invalid-error">
                        <div *ngIf="f['modelo'].errors['required']">Modelo Requerido</div>
                      </div>
                    </div>
                  </div>
                </form>
              </div>
            </div>
          </div>
        </section>
      </div>
    </ng-container>
    <ng-template #loadingTemplate>
      <ng-container *ngIf="loading">
        <div class="text-center">
          <p-progressSpinner  ariaLabel="loading" />
        </div>
      </ng-container>
    </ng-template>
  </section>
</div>
